(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-150a3a38"],{"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("d3b7");function r(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function c(e){r(a,i,o,c,u,"next",e)}function u(e){r(a,i,o,c,u,"throw",e)}c(void 0)}))}}},5127:function(e,t,n){},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=q(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",b={};function m(){}function v(){}function g(){}var j={};u(j,o,(function(){return this}));var O=Object.getPrototypeOf,y=O&&O(O(C([])));y&&y!==n&&r.call(y,o)&&(j=y);var x=g.prototype=m.prototype=Object.create(j);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,c){var u=l(e[i],e,o);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;function o(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function q(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return N()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var c=R(a,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:p,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}function R(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method))return b;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){while(++i<e.length)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=g,u(x,"constructor",g),u(g,"constructor",v),v.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},w(I.prototype),u(I.prototype,a,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),u(x,c,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return c.type="throw",c.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),a=n("861d"),c=n("7b0b"),u=n("50c4"),s=n("8418"),l=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),h=p("isConcatSpreadable"),b=9007199254740991,m="Maximum allowed index exceeded",v=f>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),g=d("concat"),j=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},O=!v||!g;r({target:"Array",proto:!0,forced:O},{concat:function(e){var t,n,r,i,o,a=c(this),d=l(a,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?a:arguments[t],j(o)){if(i=u(o.length),p+i>b)throw TypeError(m);for(n=0;n<i;n++,p++)n in o&&s(d,p,o[n])}else{if(p>=b)throw TypeError(m);s(d,p++,o)}return d.length=p,d}})},a1f5:function(e,t,n){"use strict";n("5127")},d097:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["J"])("data-v-df64b0a0");Object(r["s"])("data-v-df64b0a0");var o={class:"quiz"},a=Object(r["g"])("i",{class:"fas fa-chevron-left"},null,-1),c=Object(r["f"])(" Salir del quiz"),u=Object(r["g"])("h1",null,"Quiz",-1),s={key:0,class:"form"},l=Object(r["g"])("h3",{class:"form-header"}," Seleccione la lista de verificación que desea validar ",-1),d={class:"form-control"},p=Object(r["g"])("p",null,"Códido",-1),f={style:{"font-size":"14px","margin-left":"40px","font-weight":"100"}},h={class:"form-control"},b=Object(r["g"])("p",null,"Fecha de creación",-1),m={class:"non-editable"},v={key:2,class:"form"},g={key:0,class:"form-header-criterio"},j={class:"form-header"},O={class:"form-control"},y=Object(r["g"])("p",null,"Respuesta",-1),x={class:"radio-form",style:{"margin-left":"120px"}},w=Object(r["g"])("label",{for:"totalmente"},"Totalmente",-1),I={class:"radio-form"},q=Object(r["g"])("label",{for:"parcialmente"},"Parcialmente",-1),R={class:"radio-form"},k=Object(r["g"])("label",{for:"noimplementado"},"No implementado",-1),L={class:"radio-form"},E=Object(r["g"])("label",{for:"noaplica"},"No aplica",-1),C={key:1,class:"form-control"},N=Object(r["g"])("p",null,"Justificación",-1),S={key:2,class:"form-control"},T=Object(r["g"])("p",null,"Evidencia:",-1),z=Object(r["g"])("label",{for:"nuevo",style:{"margin-left":"122px"}},"Nueva",-1),_=Object(r["g"])("label",{class:"switch"},[Object(r["g"])("input",{type:"checkbox",name:"nuevo"}),Object(r["g"])("span",{class:"slider round"})],-1),$={key:3,class:"form-control"},P=Object(r["g"])("p",null,"Nombre del Documento:",-1),V={key:4,class:"form-control"},D=Object(r["g"])("p",null,"Archivo adjunto:",-1),G=Object(r["g"])("p",{class:"link"},"ppt.doc",-1),H={key:5},A={class:"grid"},J=Object(r["g"])("thead",{class:"header-grid"},[Object(r["g"])("tr",null,[Object(r["g"])("th",null,"Criterio"),Object(r["g"])("th",null,"Puntaje"),Object(r["g"])("th",null,"Porcentaje de cumplimiento")])],-1),B=Object(r["g"])("h3",{class:"form-header final"},"Resultados finales",-1),F={class:"grid summary"},M=Object(r["g"])("td",null,"Porcentaje de cumplimiento total",-1),U=Object(r["g"])("td",null,"Nivel de riesgo",-1);Object(r["q"])();var Q=i((function(e,t,n,i,Q,Y){var K,W,X,Z,ee,te=Object(r["x"])("nav-bar");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(te,{name:null===(K=e.userInfoJson)||void 0===K?void 0:K.nombres,lastName:null===(W=e.userInfoJson)||void 0===W?void 0:W.apellidos},null,8,["name","lastName"]),Object(r["g"])("section",o,[Object(r["g"])("h3",{class:"back",onClick:t[1]||(t[1]=function(){return e.backToEvluacion&&e.backToEvluacion.apply(e,arguments)})},[a,c]),u,e.start?Object(r["e"])("",!0):(Object(r["p"])(),Object(r["d"])("div",s,[l,Object(r["g"])("div",d,[p,Object(r["g"])("input",{type:"text",value:e.selectedListaVerificacion.codigo},null,8,["value"]),Object(r["g"])("p",f,Object(r["z"])(e.selectedListaVerificacion.requerimientos.length)+" requerimientos ",1)]),Object(r["g"])("div",h,[b,Object(r["g"])("div",m,Object(r["z"])(new Date(e.selectedListaVerificacion.fechaCreacion).toLocaleDateString()),1)])])),e.start?Object(r["e"])("",!0):(Object(r["p"])(),Object(r["d"])("button",{key:1,class:"action-button",onClick:t[2]||(t[2]=function(){return e.startQuiz&&e.startQuiz.apply(e,arguments)})}," Iniciar Quiz ")),e.start&&!e.showResultado&&e.evidenciaRequerimiento&&e.evidenciaRequerimiento[e.stepIndex]?(Object(r["p"])(),Object(r["d"])("section",v,[void 0!==(null===(X=e.requerimientos[e.stepIndex])||void 0===X?void 0:X.criterio)?(Object(r["p"])(),Object(r["d"])("h4",g," Criterio: "+Object(r["z"])(null===(Z=e.requerimientos[e.stepIndex])||void 0===Z?void 0:Z.criterio.descripcion),1)):Object(r["e"])("",!0),Object(r["g"])("h5",j," Pregunta "+Object(r["z"])(e.questionNumber+1)+":   "+Object(r["z"])(null===(ee=e.requerimientos[e.stepIndex])||void 0===ee?void 0:ee.descripcion),1),Object(r["g"])("div",O,[y,Object(r["g"])("div",x,[w,Object(r["H"])(Object(r["g"])("input",{type:"radio",name:"totalmente",id:"1",value:"1","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.evidenciaRequerimiento[e.stepIndex].respuestaItem=t})},null,512),[[r["C"],e.evidenciaRequerimiento[e.stepIndex].respuestaItem]])]),Object(r["g"])("div",I,[q,Object(r["H"])(Object(r["g"])("input",{type:"radio",name:"parcialmente",id:"0.5",value:"0.5","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.evidenciaRequerimiento[e.stepIndex].respuestaItem=t})},null,512),[[r["C"],e.evidenciaRequerimiento[e.stepIndex].respuestaItem]])]),Object(r["g"])("div",R,[k,Object(r["H"])(Object(r["g"])("input",{type:"radio",name:"noimplementado",id:"0",value:"0","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.evidenciaRequerimiento[e.stepIndex].respuestaItem=t})},null,512),[[r["C"],e.evidenciaRequerimiento[e.stepIndex].respuestaItem]])]),Object(r["g"])("div",L,[E,Object(r["H"])(Object(r["g"])("input",{type:"radio",name:"noaplica",id:"null",value:"null","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.evidenciaRequerimiento[e.stepIndex].respuestaItem=t})},null,512),[[r["C"],e.evidenciaRequerimiento[e.stepIndex].respuestaItem]])])]),"null"!=e.evidenciaRequerimiento[e.stepIndex].respuestaItem?(Object(r["p"])(),Object(r["d"])("div",C,[N,Object(r["H"])(Object(r["g"])("input",{style:{"margin-left":"102px",width:"400px"},type:"text","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.evidenciaRequerimiento[e.stepIndex].justificacion=t})},null,512),[[r["E"],e.evidenciaRequerimiento[e.stepIndex].justificacion]])])):Object(r["e"])("",!0),"null"!=e.evidenciaRequerimiento[e.stepIndex].respuestaItem?(Object(r["p"])(),Object(r["d"])("div",S,[T,z,_])):Object(r["e"])("",!0),"null"!=e.evidenciaRequerimiento[e.stepIndex].respuestaItem?(Object(r["p"])(),Object(r["d"])("div",$,[P,Object(r["H"])(Object(r["g"])("input",{style:{"margin-left":"20px",width:"300px"},type:"text","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.evidencia[e.stepIndex].nombre=t})},null,512),[[r["E"],e.evidencia[e.stepIndex].nombre]])])):Object(r["e"])("",!0),"null"!=e.evidenciaRequerimiento[e.stepIndex].respuestaItem?(Object(r["p"])(),Object(r["d"])("div",V,[D,G])):Object(r["e"])("",!0)])):Object(r["e"])("",!0),e.questionNumber>0&&!e.showResultado?(Object(r["p"])(),Object(r["d"])("button",{key:3,class:"action-button main-form left",onClick:t[9]||(t[9]=function(){return e.previous&&e.previous.apply(e,arguments)})}," Anterior ")):Object(r["e"])("",!0),e.start&&!e.showResultado?(Object(r["p"])(),Object(r["d"])("button",{key:4,class:"action-button main-form",onClick:t[10]||(t[10]=function(){return e.next&&e.next.apply(e,arguments)})},Object(r["z"])(e.end?"Finalizar":"Continuar"),1)):Object(r["e"])("",!0),e.showResultado?(Object(r["p"])(),Object(r["d"])("div",H,[Object(r["g"])("table",A,[J,Object(r["g"])("tbody",null,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(e.pruebaResultados.criteriosResultado.length,(function(t,n){return Object(r["p"])(),Object(r["d"])("tr",{key:t},[Object(r["g"])("td",null,Object(r["z"])(e.pruebaResultados.criteriosResultado[n].descripcion+" ("+e.pruebaResultados.criteriosResultado[n].peso+") "),1),Object(r["g"])("td",null,Object(r["z"])(e.pruebaResultados.criteriosResultado[n].normalizedPuntaje),1),Object(r["g"])("td",null,Object(r["z"])(e.pruebaResultados.criteriosResultado[n].porcentajeCumplimiento+"%"),1)])})),128))])]),B,Object(r["g"])("table",F,[Object(r["g"])("tbody",null,[Object(r["g"])("tr",null,[M,Object(r["g"])("td",null,Object(r["z"])(e.pruebaResultados.porcentajeCumplimientoTotal)+"%",1)]),Object(r["g"])("tr",null,[U,Object(r["g"])("td",null,Object(r["z"])(e.pruebaResultados.nivelDeRiesgo),1)])]),Object(r["g"])("button",{class:"action-button main-form left final",onClick:t[11]||(t[11]=function(){return e.showSummary&&e.showSummary.apply(e,arguments)})}," Visualizar resumen "),Object(r["g"])("button",{class:"action-button main-form final",onClick:t[12]||(t[12]=function(){return e.submit&&e.submit.apply(e,arguments)})}," Guardar prueba ")])])):Object(r["e"])("",!0)])],64)})),Y=n("b85c"),K=n("5530"),W=n("1da1"),X=(n("96cf"),n("d3b7"),n("ac1f"),n("5319"),n("99af"),n("4e82"),n("d81d"),n("4ec9"),n("3ca3"),n("ddb0"),n("25f0"),n("4de4"),n("7db0"),n("159b"),n("f464")),Z=n("5c40"),ee=n("d43e"),te=n("b74e"),ne=n("2fc2"),re=Object(Z["l"])({components:{NavBar:X["a"]},computed:{selectedListaVerificacion:function(){return this.$store.getters["listaVerificacionModule/selectedListaVerificacion"]},prueba:function(){return this.$store.getters["pruebaModule/obtenerPrueba"]},evaluacion:function(){return this.$store.getters["evaluacionModule/obtenerEvaluacion"]}},data:function(){return{userInfoJson:Object(ee["h"])(),date:(new Date).toLocaleDateString(),start:!1,criterios:[],requerimientos:[],evidenciaRequerimiento:[],evidencia:[],pruebaResultados:{},obraId:"",criterioIndex:0,stepIndex:0,questionNumber:0,end:!1,showResultado:!1,loading:!1,error:!1,message:"",evaluacionDetalle:{}}},methods:{backToEvluacion:function(){this.$router.push("/evaluacion/".concat(this.evaluacion.codigo))},startQuiz:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={EvaluacionId:e.evaluacion.evaluacionId,Codigo:e.prueba.codigo},t.prev=1,t.next=4,fetch("".concat(ne["c"],"prueba"),{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(n)});case 4:return i=t.sent,t.next=7,i.json();case 7:r=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0);case 13:e.$router.replace({path:"/evaluacion/".concat(e.evaluacion.codigo,"/prueba/").concat(r.codigo),query:{req:1}}),e.start=!0;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},obtenerPruebaResults:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(ne["c"],"prueba/").concat(e.prueba.codigo),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,Object(te["a"])(n);case 6:return e.loading=!1,e.error=!1,t.next=10,n.json();case 10:e.pruebaResultados=t.sent,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),e.error=!0,JSON.parse(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},registrarEvidenciaRequerimiento:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){var n,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,"null"===e.evidenciaRequerimiento[e.stepIndex].respuestaItem&&(e.evidenciaRequerimiento[e.stepIndex].justificacion="",e.evidencia[e.stepIndex].nombre=""),n={EvidenciaId:e.evidencia[e.stepIndex].evidenciaId?e.evidencia[e.stepIndex].evidenciaId:null,RequerimientoId:e.requerimientos[e.stepIndex].requerimientoId,PruebaCodigo:e.$route.params.pr_codigo,EvidenciaNombre:e.evidencia[e.stepIndex].nombre,Justificacion:e.evidenciaRequerimiento[e.stepIndex].justificacion,RespuestaItem:JSON.parse(e.evidenciaRequerimiento[e.stepIndex].respuestaItem)},t.next=5,fetch("".concat(ne["c"],"evidenciarequerimiento"),{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(n)});case 5:return r=t.sent,t.next=8,Object(te["a"])(r);case 8:return t.next=10,r.json();case 10:i=t.sent,e.evidencia[e.stepIndex].evidenciaId=i.evidenciaId,e.loading=!1,e.error=!1,t.next=22;break;case 16:t.prev=16,t.t0=t["catch"](0),e.error=!0,console.log(t.t0),o=JSON.parse(t.t0.message),console.log(o.errores);case 22:case"end":return t.stop()}}),t,null,[[0,16]])})))()},next:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.registrarEvidenciaRequerimiento();case 2:if(!e.end){t.next=10;break}return e.stepIndex=0,t.next=6,e.obtenerPruebaResults();case 6:e.showResultado=!0,e.$router.push("/evaluacion/".concat(e.evaluacion.codigo,"/prueba/").concat(e.$route.params.pr_codigo,"/resumen")),t.next=20;break;case 10:if(e.evidencia.push(Object(ee["c"])()),e.evidenciaRequerimiento.push(Object(ee["d"])()),e.requerimientos[e.stepIndex+2]||(e.end=!0),!e.requerimientos[e.stepIndex+1]){t.next=17;break}e.stepIndex+=1,t.next=18;break;case 17:return t.abrupt("return");case 18:e.questionNumber+=1,e.$router.push({path:"/evaluacion/".concat(e.evaluacion.codigo,"/prueba/").concat(e.$route.params.pr_codigo),query:{req:e.questionNumber+1}});case 20:case"end":return t.stop()}}),t)})))()},previous:function(){this.requerimientos[this.stepIndex-1]&&(this.stepIndex-=1,this.questionNumber-=1,this.end=!1,this.$router.replace({path:"/evaluacion/".concat(this.evaluacion.codigo,"/prueba/").concat(this.$route.params.pr_codigo),query:{req:this.questionNumber+1}}))},showSummary:function(){this.$router.push("/lista-verificacion/".concat(this.selectedListaVerificacion.codigo,"/prueba/").concat(this.$route.params.pr_codigo,"/resumen"))},submit:function(){var e=this;Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(ne["c"],"prueba/activar/").concat(e.prueba.codigo),{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:e.$router.push("/evaluacion/"+e.evaluacion.codigo);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},mounted:function(){var e=this;Object(W["a"])(regeneratorRuntime.mark((function t(){var n,r,i,o,a,c,u,s,l,d,p,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,fetch("".concat(ne["c"],"evaluacion/").concat(e.$route.params.ev_codigo),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 4:if(r=t.sent,"No Content"===r.statusText){t.next=14;break}return t.next=8,r.json();case 8:e.evaluacionDetalle=t.sent,e.selectedListaVerificacion.fechaCreacion=e.evaluacionDetalle.listaVerificacionFechaCreacion,e.selectedListaVerificacion.requerimientosCount=e.evaluacionDetalle.requerimientosCount,e.selectedListaVerificacion.codigo=e.evaluacionDetalle.codigoListaVerificacion,e.obraId=e.evaluacionDetalle.obraId,e.$store.dispatch("evaluacionModule/guardarEvaluacion",Object(K["a"])(Object(K["a"])({},e.evaluacion),{},{evaluacionId:e.evaluacionDetalle.evaluacionId,codigo:e.evaluacionDetalle.codigo,nombre:e.evaluacionDetalle.nombre,estado:e.evaluacionDetalle.estado,visibilidad:e.evaluacionDetalle.visibilidad,fechaCreacion:new Date(e.evaluacionDetalle.fechaCreacion).toLocaleDateString()}));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.log(t.t0);case 19:return t.prev=19,t.next=22,fetch("".concat(ne["c"],"listaverificaciones/lista?filter=").concat(e.evaluacionDetalle.codigoListaVerificacion),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 22:return i=t.sent,t.next=25,i.json();case 25:n=t.sent,e.$store.dispatch("listaVerificacionModule/guardarListaVerificacion",Object(K["a"])({},n[0])),o=n[0].requerimientos.map((function(e){return e.criterio})).sort((function(e,t){return e.descripcion.localeCompare(t.descripcion)})),a=new Map,c=Object(Y["a"])(o);try{for(c.s();!(u=c.n()).done;)s=u.value,a.has(s.descripcion)||(a.set(s.descripcion,!0),e.criterios.push(s))}catch(b){c.e(b)}finally{c.f()}e.requerimientos=e.selectedListaVerificacion.requerimientos.sort((function(e,t){return e.criterio.descripcion.localeCompare(t.criterio.descripcion)})),e.evidencia.push(Object(ee["c"])()),e.evidenciaRequerimiento.push(Object(ee["d"])()),t.next=39;break;case 36:t.prev=36,t.t1=t["catch"](19),console.log(t.t1);case 39:if(void 0!=e.$route.params.pr_codigo){t.next=57;break}return t.prev=40,t.next=43,fetch("".concat(ne["c"],"prueba/count"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 43:return l=t.sent,t.next=46,l.json();case 46:d=t.sent,p="",p=d>10?"0":"00",e.$store.dispatch("pruebaModule/guardarPrueba",Object(K["a"])(Object(K["a"])({},e.prueba),{},{codigo:"PR"+p+(d+1).toString()})),t.next=55;break;case 52:t.prev=52,t.t2=t["catch"](40),console.log(t.t2);case 55:t.next=75;break;case 57:return e.$store.dispatch("pruebaModule/guardarPrueba",Object(K["a"])(Object(K["a"])({},e.prueba),{},{codigo:e.$route.params.pr_codigo})),t.prev=58,t.next=61,fetch("".concat(ne["c"],"evidenciarequerimiento/").concat(e.$route.params.pr_codigo),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 61:return f=t.sent,t.next=64,f.json();case 64:h=t.sent,h.length>0&&(e.evidencia=[],e.evidenciaRequerimiento=[],h=e.requerimientos.map((function(e){return h.find((function(t){return t.requerimientoId==e.requerimientoId}))})).filter((function(e){return void 0!==e})),h.forEach((function(t){var n,r,i;e.evidencia.push({evidenciaId:null===(n=t.evidencia)||void 0===n?void 0:n.evidenciaId,nombre:null===(r=t.evidencia)||void 0===r?void 0:r.nombre,adjunto:null===(i=t.evidencia)||void 0===i?void 0:i.adjunto}),e.evidenciaRequerimiento.push({evidenciaId:t.evidenciaId,requerimientoId:t.requerimientoId,pruebaId:t.pruebaId,justificacion:t.justificacion,respuestaItem:t.respuestaItem,recomendacion:t.recomendacion})}))),h.length>0?(e.stepIndex=h.length-1,e.questionNumber=h.length-1):(e.stepIndex=0,e.questionNumber=0),e.requerimientos.length==h.length&&(e.end=!0),e.$router.replace({path:"/evaluacion/".concat(e.evaluacion.codigo,"/prueba/").concat(e.$route.params.pr_codigo),query:{req:e.questionNumber+1}}),e.start=!0,t.next=75;break;case 72:t.prev=72,t.t3=t["catch"](58),console.log(t.t3);case 75:case"end":return t.stop()}}),t,null,[[1,16],[19,36],[40,52],[58,72]])})))()},unmounted:function(){this.start=!1,this.criterioIndex=0,this.stepIndex=0,this.questionNumber=0,this.end=!1,this.showResultado=!1}});n("a1f5");re.render=Q,re.__scopeId="data-v-df64b0a0";t["default"]=re}}]);
//# sourceMappingURL=chunk-150a3a38.35877c1f.js.map