(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46c5a0b1"],{1568:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o=Object(a["W"])("data-v-822f512e");Object(a["E"])("data-v-822f512e");var r=Object(a["m"])("i",{class:"fas fa-chevron-left"},null,-1),c=Object(a["l"])(" Salir "),i={class:"buttons"};Object(a["C"])();var s=o((function(e,t,n,o,s,l){var u=Object(a["J"])("confirmation-modal"),d=Object(a["J"])("modal"),b=Object(a["J"])("grid");return Object(a["B"])(),Object(a["j"])(a["b"],null,[Object(a["m"])(u,{error:null,show:e.showModalConfirmation,title:e.modalTitle,massiveDelete:e.massiveDelete,onConfirm:e.confirmDelete,onConfirmMassive:e.confirmMassiveDelete,onCancel:e.closeModal},null,8,["show","title","massiveDelete","onConfirm","onConfirmMassive","onCancel"]),Object(a["m"])(d,{show:!!e.message,title:e.message,onClose:e.handleError,error:e.error,loading:e.loading},null,8,["show","title","onClose","error","loading"]),Object(a["m"])("section",{id:"main",class:{expand:e.expand}},[Object(a["m"])("div",null,[Object(a["m"])("h3",{class:"back",onClick:t[1]||(t[1]=function(){return e.goBack&&e.goBack.apply(e,arguments)})},[r,c]),Object(a["m"])("h2",null,"ADMINISTRACIÓN DE "+Object(a["L"])(e.calculateUser()),1),Object(a["m"])("div",i,[Object(a["m"])("button",{class:"action-button",onClick:t[2]||(t[2]=function(t){return e.deleteMassive()})}," Eliminación masiva "),Object(a["m"])("button",{class:"action-button",onClick:t[3]||(t[3]=function(t){return e.register()})},"Registrar")])]),Object(a["m"])(b,{dataSource:e.dataSource,columns:e.columns,config:e.config,actions:e.actions,rows:5,onMovePage:e.movePage,onSelectedList:e.selectedList},null,8,["dataSource","columns","config","actions","onMovePage","onSelectedList"])],2)],64)})),l=n("1da1"),u=(n("96cf"),n("d3b7"),n("99af"),n("3ca3"),n("ddb0"),n("d81d"),n("9fbc")),d=n("b7ff"),b=n("705f"),f=n("2fc2"),h=n("5c40"),m=n("d43e"),p=Object(h["p"])({components:{Grid:u["a"],ConfirmationModal:d["a"],Modal:b["a"]},data:function(){return{profileUrl:"",userRol:"",userInfoJson:null,dataSource:Object(m["a"])(),columns:f["k"],config:{deleteEntity:"",entity:f["n"].USER},actions:[{icon:"fas fa-trash-alt",type:f["e"].DELETE,method:this.delete},{icon:"fas fa-eye",type:f["e"].EDIT,method:this.edit}],modalTitle:"",showModalConfirmation:!1,id:"",entity:"",message:null,loading:!1,error:!1,entityList:[],massiveDelete:!1,expand:!1,page:1,quantity:5}},methods:{movePage:function(e){this.page=e,this.listUsersByRol()},expandMain:function(e){this.expand=!e},selectedList:function(e){this.entityList=e},handleError:function(){this.message=null},closeModal:function(){this.showModalConfirmation=!1},calculateUser:function(){switch(console.log(this.$route),this.$route.path){case"/dashboard/alta-gerencia":this.userRol="ALTA GERENCIA",this.profileUrl="/dashboard/profile/alta-gerencia/";break;case"/dashboard/analistas":this.userRol="ANALISTAS",this.profileUrl="/dashboard/profile/analista/";break;case"/dashboard/jefe-de-riesgos":this.userRol="JEFE DE RIESGOS",this.profileUrl="/dashboard/profile/jefe-de-riesgos/",this.columns=f["l"];break;case"/dashboard/lista-especialistas":this.userRol="ESPECIALISTAS",this.profileUrl="/dashboard/profile/especialista/",this.columns=f["l"];break}return this.userRol},goBack:function(){this.$router.back()},listUsersByRol:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(f["c"],"usuario/listar/").concat(e.userRol,"?page=").concat(e.page,"&quantity=").concat(e.quantity),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.dataSource=t.sent,console.log("this.dataSource"),console.log(e.dataSource),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteMassive:function(){this.entityList.length>0?(this.massiveDelete=!0,this.showModalConfirmation=!0,this.modalTitle="¿Está seguro que desea eliminar los usuarios seleccionados?"):(this.message="Debe seleccionar al menos un usuario",this.error=!0),this.page=1},register:function(){this.$router.push(this.profileUrl)},edit:function(e,t,n){n===f["n"].USER&&this.$router.push(this.profileUrl+e)},delete:function(e,t,n){this.id=e,this.entity=n,this.modalTitle="¿Está seguro que desea eliminar el "+n+"?",this.showModalConfirmation=!0,this.page=1},confirmMassiveDelete:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.entityList),t.next=3,Promise.all(e.entityList.map(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(f["c"],"usuario/").concat(t),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 3:e.massiveDelete=!1,e.showModalConfirmation=!1,e.modalTitle="",e.message="Los usuarios  fueron eliminados",setTimeout(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3);case 8:case"end":return t.stop()}}),t)})))()},confirmDelete:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.closeModal(),t.prev=1,t.next=4,fetch("".concat(f["c"]).concat(e.entity,"/").concat(e.id),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 4:t.sent,e.message="El ".concat(e.entity," fue eliminado"),e.id="",e.entity="",setTimeout(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},mounted:function(){var e=this;Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(f["c"],"usuario"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,e.userInfoJson=a,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:return t.next=15,e.listUsersByRol();case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}),j=(n("9934"),n("d959")),g=n.n(j);const O=g()(p,[["render",s],["__scopeId","data-v-822f512e"]]);t["default"]=O},"38b4":function(e,t,n){"use strict";n("c016")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),o=n("5899"),r="["+o+"]",c=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),s=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},"682b":function(e,t,n){"use strict";function a(e){var t=new Date(e),n=Date.now()-t.getTime(),a=new Date(n);return Math.abs(a.getUTCFullYear()-1970)}n.d(t,"a",(function(){return a}))},7156:function(e,t,n){var a=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var r,c;return o&&"function"==typeof(r=t.constructor)&&r!==n&&a(c=r.prototype)&&c!==n.prototype&&o(e,c),e}},8996:function(e,t,n){},9934:function(e,t,n){"use strict";n("8996")},"9fbc":function(e,t,n){"use strict";var a=n("7a23"),o=Object(a["W"])("data-v-30baf8dd");Object(a["E"])("data-v-30baf8dd");var r={class:"grid"},c={key:0},i={key:1},s={key:0},l=Object(a["m"])("br",null,null,-1),u={key:0},d={key:1,class:"no-data"},b={key:0},f={key:1},h={key:0};Object(a["C"])();var m=o((function(e,t,n,o,m,p){var j,g,O;return Object(a["B"])(),Object(a["j"])(a["b"],null,[Object(a["m"])("table",r,[Object(a["m"])("thead",{class:e.rowHeaderStyle?"".concat(e.rowHeaderStyle," header-grid"):"header-grid"},[Object(a["m"])("tr",null,[(null===(j=e.actions)||void 0===j?void 0:j.length)>0&&"delete"==e.actions[0].type&&e.dataSource.listaRecords.length>0?(Object(a["B"])(),Object(a["j"])("th",c,[Object(a["U"])(Object(a["m"])("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.massiveCheck=t})},null,512),[[a["N"],e.massiveCheck]])])):Object(a["k"])("",!0),(Object(a["B"])(!0),Object(a["j"])(a["b"],null,Object(a["H"])(e.columns,(function(e){return Object(a["B"])(),Object(a["j"])("th",{key:e.field,style:{textAlign:e.align?e.align:"left"}},Object(a["L"])(e.title),5)})),128)),(null===(g=e.actions)||void 0===g?void 0:g.length)>0?(Object(a["B"])(),Object(a["j"])("th",i,"Acciones")):Object(a["k"])("",!0)])],2),e.dataSource.listaRecords&&0===(null===(O=e.dataSource.listaRecords)||void 0===O?void 0:O.length)?(Object(a["B"])(),Object(a["j"])("div",s,[l,e.rowBodyStyle?(Object(a["B"])(),Object(a["j"])("p",d,"Sin registros")):(Object(a["B"])(),Object(a["j"])("h3",u,"No hay datos registrados"))])):Object(a["k"])("",!0),Object(a["m"])("tbody",{class:e.rowBodyStyle?e.rowBodyStyle:""},[(Object(a["B"])(!0),Object(a["j"])(a["b"],null,Object(a["H"])(e.rows,(function(n,o){var r,c;return Object(a["B"])(),Object(a["j"])("tr",{key:n},[(null===(r=e.actions)||void 0===r?void 0:r.length)>0&&"delete"==e.actions[0].type&&e.dataSource.listaRecords.length>0?(Object(a["B"])(),Object(a["j"])("td",b,[e.dataSource.listaRecords&&e.dataSource.listaRecords[o]?Object(a["U"])((Object(a["B"])(),Object(a["j"])("input",{key:0,type:"checkbox",id:e.dataSource.listaRecords[o].id,value:e.dataSource.listaRecords[o].id,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.checkedEntities=t})},null,8,["id","value"])),[[a["N"],e.checkedEntities]]):Object(a["k"])("",!0)])):Object(a["k"])("",!0),(Object(a["B"])(!0),Object(a["j"])(a["b"],null,Object(a["H"])(e.columns,(function(t){return Object(a["B"])(),Object(a["j"])("td",{key:t.field},[Object(a["m"])("p",{style:{textAlign:t.align?t.align:"left"}},Object(a["L"])(e.getValue(t.field,e.dataSource.listaRecords,n-1,t.type)),5)])})),128)),(null===(c=e.actions)||void 0===c?void 0:c.length)>0?(Object(a["B"])(),Object(a["j"])("td",f,[(Object(a["B"])(!0),Object(a["j"])(a["b"],null,Object(a["H"])(e.actions,(function(t){return Object(a["B"])(),Object(a["j"])("span",{key:t.type},[e.dataSource.listaRecords[o]?(Object(a["B"])(),Object(a["j"])("i",{key:0,class:t.icon,style:{"margin-left":"18px"},onClick:function(n){return t.method(e.dataSource.listaRecords[o].id,e.dataSource.listaRecords[o].codigo,e.dataSource.listaRecords[o].entity)}},null,10,["onClick"])):Object(a["k"])("",!0)])})),128))])):Object(a["k"])("",!0)])})),128))],2)]),e.dataSource.numeroPaginas>1?(Object(a["B"])(),Object(a["j"])("div",h,[(Object(a["B"])(!0),Object(a["j"])(a["b"],null,Object(a["H"])(e.dataSource.numeroPaginas,(function(t){return Object(a["B"])(),Object(a["j"])("div",{key:t,class:"pageButton",onClick:function(n){return e.goPage(t)}},Object(a["L"])(t),9,["onClick"])})),128))])):Object(a["k"])("",!0)],64)})),p=(n("a9e3"),n("d81d"),n("682b")),j=n("5c40"),g=n("d4ec"),O=function e(t,n,a){Object(g["a"])(this,e),this.listaRecords=t,this.numeroPaginas=n,this.totalRecords=a},v=Object(j["p"])({props:{columns:{type:Array,required:!0},dataSource:{type:O,required:!0},config:{type:null,required:!1},actions:{type:null,required:!1,default:[]},method:{type:Function,required:!1},rows:{type:Number,required:!1,default:5},pages:{type:Number,required:!0},rowHeaderStyle:{type:String,required:!1},rowBodyStyle:{type:String,required:!1}},emits:["selectedList","movePage"],data:function(){return{massiveCheck:!1,checkedEntities:[]}},watch:{massiveCheck:function(){this.massiveCheck?this.checkedEntities=this.dataSource.listaRecords.map((function(e){return e.id})):this.checkedEntities=[]},checkedEntities:function(){this.$emit("selectedList",this.checkedEntities)}},methods:{goPage:function(e){this.$emit("movePage",e)},getValue:function(e,t,n,a){if(t)return t[n]?"fechaNacimiento"===e?Object(p["a"])(t[n][e]):"date"===a?new Date(t[n][e]).toLocaleDateString():t[n][e]:""}}}),y=(n("38b4"),n("d959")),k=n.n(y);const w=k()(v,[["render",m],["__scopeId","data-v-30baf8dd"]]);t["a"]=w},a1f3:function(e,t,n){},a9e3:function(e,t,n){"use strict";var a=n("83ab"),o=n("da84"),r=n("94ca"),c=n("6eeb"),i=n("5135"),s=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),b=n("7c73"),f=n("241c").f,h=n("06cf").f,m=n("9bf2").f,p=n("58a8").trim,j="Number",g=o[j],O=g.prototype,v=s(b(O))==j,y=function(e){var t,n,a,o,r,c,i,s,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=p(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(r=l.slice(2),c=r.length,i=0;i<c;i++)if(s=r.charCodeAt(i),s<48||s>o)return NaN;return parseInt(r,a)}return+l};if(r(j,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(v?d((function(){O.valueOf.call(n)})):s(n)!=j)?l(new g(y(t)),n,w):y(t)},S=a?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;S.length>E;E++)i(g,k=S[E])&&!i(w,k)&&m(w,k,h(g,k));w.prototype=O,O.constructor=w,c(o,j,w)}},aa14:function(e,t,n){"use strict";n("a1f3")},b7ff:function(e,t,n){"use strict";var a=n("7a23"),o=Object(a["W"])("data-v-ea440b04");Object(a["E"])("data-v-ea440b04");var r={key:0,class:"modal"},c=Object(a["m"])("i",{class:"far fa-times-circle fa-2x"},null,-1),i={class:"flex-button"};Object(a["C"])();var s=o((function(e,t,n,o,s,l){var u=Object(a["J"])("backdrop");return Object(a["B"])(),Object(a["j"])(a["b"],null,[Object(a["m"])(u,{show:e.show,onClose:e.tryClose,closable:!1},null,8,["show","onClose"]),e.show?(Object(a["B"])(),Object(a["j"])("div",r,[c,Object(a["m"])("p",null,Object(a["L"])(e.title),1),Object(a["m"])("div",i,[Object(a["m"])("button",{onClick:t[1]||(t[1]=function(t){return e.confirm()}),class:"action-button"},"Aceptar"),Object(a["m"])("button",{style:{background:"var(--danger)"},onClick:t[2]||(t[2]=function(t){return e.cancel()}),class:"action-button"}," Cancelar ")])])):Object(a["k"])("",!0)],64)})),l=n("5c40"),u=n("c2de"),d=Object(l["p"])({components:{Backdrop:u["a"]},props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},massiveDelete:{type:Boolean,required:!1}},emits:["confirmMassive","close","confirm","cancel"],methods:{tryClose:function(){this.$emit("close")},confirm:function(){this.massiveDelete?this.$emit("confirmMassive"):this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}}),b=(n("aa14"),n("d959")),f=n.n(b);const h=f()(d,[["render",s],["__scopeId","data-v-ea440b04"]]);t["a"]=h},c016:function(e,t,n){},d81d:function(e,t,n){"use strict";var a=n("23e7"),o=n("b727").map,r=n("1dde"),c=r("map");a({target:"Array",proto:!0,forced:!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-46c5a0b1.7fc57c1d.js.map