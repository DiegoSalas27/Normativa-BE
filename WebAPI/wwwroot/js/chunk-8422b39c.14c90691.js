(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8422b39c"],{1568:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o=Object(a["J"])("data-v-23fe8e2c"),r=o((function(e,t,n,o,r,s){var i=Object(a["x"])("confirmation-modal"),c=Object(a["x"])("modal"),l=Object(a["x"])("grid");return Object(a["p"])(),Object(a["d"])(a["a"],null,[Object(a["g"])(i,{error:null,show:e.showModalConfirmation,title:e.modalTitle,massiveDelete:e.massiveDelete,onConfirm:e.confirmDelete,onConfirmMassive:e.confirmMassiveDelete,onCancel:e.closeModal},null,8,["show","title","massiveDelete","onConfirm","onConfirmMassive","onCancel"]),Object(a["g"])(c,{show:!!e.message,title:e.message,onClose:e.handleError,error:e.error,loading:e.loading},null,8,["show","title","onClose","error","loading"]),Object(a["g"])("section",{id:"main",class:{expand:e.expand}},[Object(a["g"])("div",null,[Object(a["g"])("h2",null,"ADMINISTRACIÓN DE "+Object(a["z"])(e.calculateUser()),1),Object(a["g"])("button",{class:"action-button massive",onClick:t[1]||(t[1]=function(t){return e.deleteMassive()})}," Eliminación masiva "),Object(a["g"])("button",{class:"action-button",onClick:t[2]||(t[2]=function(t){return e.register()})},"Registrar")]),Object(a["g"])(l,{dataSource:e.dataSource,columns:e.columns,config:e.config,actions:e.actions,rows:5,onMovePage:e.movePage,onSelectedList:e.selectedList},null,8,["dataSource","columns","config","actions","onMovePage","onSelectedList"])],2)],64)})),s=n("1da1"),i=(n("96cf"),n("d3b7"),n("99af"),n("3ca3"),n("ddb0"),n("d81d"),n("9fbc")),c=n("b7ff"),l=n("705f"),u=n("2fc2"),d=n("5c40"),h=n("d43e"),m=Object(d["l"])({components:{Grid:i["a"],ConfirmationModal:c["a"],Modal:l["a"]},data:function(){return{profileUrl:"",userRol:"",userInfoJson:null,dataSource:Object(h["a"])(),columns:u["f"],config:{deleteEntity:"",entity:u["g"].USER},actions:[{icon:"fas fa-trash-alt",type:u["d"].DELETE,method:this.delete},{icon:"fas fa-eye",type:u["d"].EDIT,method:this.edit}],modalTitle:"",showModalConfirmation:!1,id:"",entity:"",message:null,loading:!1,error:!1,entityList:[],massiveDelete:!1,expand:!1,page:1,quantity:5}},methods:{movePage:function(e){this.page=e,this.listUsersByRol()},expandMain:function(e){this.expand=!e},selectedList:function(e){this.entityList=e},handleError:function(){this.message=null},closeModal:function(){this.showModalConfirmation=!1},calculateUser:function(){switch(console.log(this.$route),this.$route.path){case"/dashboard/alta-gerencia":this.userRol="ALTA GERENCIA",this.profileUrl="/dashboard/profile/alta-gerencia/";break;case"/dashboard/analistas":this.userRol="ANALISTAS",this.profileUrl="/dashboard/profile/analista/";break}return this.userRol},listUsersByRol:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(u["c"],"usuario/listar/").concat(e.userRol,"?page=").concat(e.page,"&quantity=").concat(e.quantity),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.dataSource=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteMassive:function(){this.entityList.length>0?(this.massiveDelete=!0,this.showModalConfirmation=!0,this.modalTitle="Está seguro que desea eliminar los usuarios seleccionados ?"):(this.message="Debe seleccionar al menos un usuario",this.error=!0),this.page=1},register:function(){this.$router.push(this.profileUrl)},edit:function(e,t){t===u["g"].USER&&this.$router.push(this.profileUrl+e)},delete:function(e,t){this.id=e,this.entity=t,this.modalTitle="Está seguro que desea eliminar "+t+"?",this.showModalConfirmation=!0,this.page=1},confirmMassiveDelete:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.entityList),Promise.all(e.entityList.map(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u["c"],"usuario/").concat(t),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}())),e.massiveDelete=!1,e.showModalConfirmation=!1,e.modalTitle="",e.message="Los usuarios  fueron eliminados",setTimeout(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3);case 7:case"end":return t.stop()}}),t)})))()},confirmDelete:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.closeModal(),t.prev=1,t.next=4,fetch("".concat(u["c"]).concat(e.entity,"/").concat(e.id),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 4:t.sent,e.message="El ".concat(e.entity," fue eliminado"),e.id="",e.entity="",setTimeout(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},mounted:function(){var e=this;Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(u["c"],"usuario"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,e.userInfoJson=a,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:return t.next=15,e.listUsersByRol();case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()}});n("9235");m.render=r,m.__scopeId="data-v-23fe8e2c";t["default"]=m},9235:function(e,t,n){"use strict";n("f4d4")},f4d4:function(e,t,n){}}]);
//# sourceMappingURL=chunk-8422b39c.14c90691.js.map