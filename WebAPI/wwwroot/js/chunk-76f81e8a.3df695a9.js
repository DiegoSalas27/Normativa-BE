(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76f81e8a"],{"0aec":function(e,t,n){},"0cb2":function(e,t,n){var a=n("7b0b"),r=Math.floor,c="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,s,u,l){var d=n+e.length,f=s.length,p=i;return void 0!==u&&(u=a(u),p=o),c.call(l,p,(function(a,c){var o;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=u[c.slice(1,-1)];break;default:var i=+c;if(0===i)return a;if(i>f){var l=r(i/10);return 0===l?a:l<=f?void 0===s[l-1]?c.charAt(1):s[l-1]+c.charAt(1):a}o=s[i-1]}return void 0===o?"":o}))}},"107c":function(e,t,n){var a=n("d039");e.exports=a((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1148:function(e,t,n){"use strict";var a=n("a691"),r=n("1d80");e.exports=function(e){var t=String(r(this)),n="",c=a(e);if(c<0||c==1/0)throw RangeError("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(t+=t))1&c&&(n+=t);return n}},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var c=n.call(e,t);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},2532:function(e,t,n){"use strict";var a=n("23e7"),r=n("5a34"),c=n("1d80"),o=n("ab13");a({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(c(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,n){"use strict";var a=n("6eeb"),r=n("825a"),c=n("d039"),o=n("ad6d"),i="toString",s=RegExp.prototype,u=s[i],l=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=i;(l||d)&&a(RegExp.prototype,i,(function(){var e=r(this),t=String(e.source),n=e.flags,a=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n);return"/"+t+"/"+a}),{unsafe:!0})},"408a":function(e,t,n){var a=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),c=n("b622"),o=c("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("d039"),c=n("825a"),o=n("50c4"),i=n("a691"),s=n("1d80"),u=n("8aa5"),l=n("0cb2"),d=n("14c3"),f=n("b622"),p=f("replace"),b=Math.max,g=Math.min,m=function(e){return void 0===e?e:String(e)},h=function(){return"$0"==="a".replace(/./,"$0")}(),v=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),j=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));a("replace",(function(e,t,n){var a=v?"$":"$0";return[function(e,n){var a=s(this),r=void 0==e?void 0:e[p];return void 0!==r?r.call(e,a,n):t.call(String(a),e,n)},function(e,r){if("string"===typeof r&&-1===r.indexOf(a)&&-1===r.indexOf("$<")){var s=n(t,this,e,r);if(s.done)return s.value}var f=c(this),p=String(e),h="function"===typeof r;h||(r=String(r));var v=f.global;if(v){var j=f.unicode;f.lastIndex=0}var O=[];while(1){var x=d(f,p);if(null===x)break;if(O.push(x),!v)break;var w=String(x[0]);""===w&&(f.lastIndex=u(p,o(f.lastIndex),j))}for(var y="",k=0,E=0;E<O.length;E++){x=O[E];for(var I=String(x[0]),C=b(g(i(x.index),p.length),0),R=[],S=1;S<x.length;S++)R.push(m(x[S]));var T=x.groups;if(h){var A=[I].concat(R,C,p);void 0!==T&&A.push(T);var $=String(r.apply(void 0,A))}else $=l(I,p,C,R,T,r);C>=k&&(y+=p.slice(k,C)+$,k=C+I.length)}return y+p.slice(k)}]}),!j||!h||v)},"5a34":function(e,t,n){var a=n("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5ef3":function(e,t,n){},"68d2":function(e,t,n){"use strict";n.r(t);n("b680");var a=n("7a23"),r=n("1d35"),c=n.n(r),o=n("c3e0"),i=n.n(o),s=n("ba97"),u=n.n(s),l=Object(a["J"])("data-v-323ddf7c");Object(a["s"])("data-v-323ddf7c");var d={id:"main"},f={class:"grid-container"},p={class:"grid-item"},b=Object(a["g"])("h4",null,"Código de tratamiento:",-1),g=Object(a["g"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1),m={key:0},h={class:"grid-item"},v=Object(a["g"])("h4",null,"Código de evaluación:",-1),j=Object(a["g"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1),O={key:0},x={style:{position:"absolute"}},w={key:2,class:"error"},y={class:"grid-item"},k=Object(a["g"])("h4",null,"Código de prueba:",-1),E=Object(a["g"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1),I={class:"grid-item"},C=Object(a["g"])("h4",null,"Nombre del plan de tratamiento:",-1),R=Object(a["g"])("img",{src:i.a,alt:"codeva",class:"imgIcon"},null,-1),S={key:0},T={key:2,class:"error"},A={class:"grid-item"},$=Object(a["g"])("h4",null,"Responsable:",-1),M=Object(a["g"])("img",{src:u.a,alt:"codeva",class:"imgIcon"},null,-1),J={key:0},_={class:"grid-item",style:{"margin-top":"50px"}},z={key:1,id:"acciones-mitigacion"},D=Object(a["g"])("h4",null,"Acciones de mitigación",-1),B=Object(a["g"])("br",null,null,-1),F={key:0,class:"flex-row table-options"},P=Object(a["f"])("   "),N={class:"grid"},H={class:"header-grid"},L={key:0},U=Object(a["g"])("th",{style:{width:"60%"}},"Acciones de mitigación",-1),V=Object(a["g"])("th",{style:{width:"12.5%"}},"Fecha de inicio",-1),q=Object(a["g"])("th",{style:{width:"12.5%"}},"Fecha de fin",-1),G={key:1},K={key:2},Z=Object(a["g"])("th",{style:{width:"15%"}},"Estado",-1),Y={key:0},W={style:{width:"60%","text-align":"left"}},Q={key:0,style:{width:"90%"}},X={key:2,class:"far fa-envelope"},ee={style:{width:"12.5%"}},te={key:0},ne={style:{width:"12.5%"}},ae={key:0},re=Object(a["g"])("i",{class:"fas fa-edit"},null,-1),ce=Object(a["g"])("i",{class:"fas fa-trash-alt",style:{color:"red"}},null,-1),oe={style:{width:"15%"}};Object(a["q"])();var ie=l((function(e,t,n,r,c,o){var i,s,u,l,ie=Object(a["x"])("nav-bar"),se=Object(a["x"])("confirmation-modal"),ue=Object(a["x"])("modal");return Object(a["p"])(),Object(a["d"])(a["a"],null,[Object(a["g"])(ie,{name:null===(i=e.userInfoJson)||void 0===i?void 0:i.nombres,lastName:null===(s=e.userInfoJson)||void 0===s?void 0:s.apellidos},null,8,["name","lastName"]),Object(a["g"])(se,{error:null,show:e.showModalConfirmation,title:e.modalTitle,massiveDelete:e.massiveDelete,onConfirm:e.deleteAccion,onConfirmMassive:e.confirmMassiveDelete,onCancel:e.closeModal},null,8,["show","title","massiveDelete","onConfirm","onConfirmMassive","onCancel"]),Object(a["g"])(ue,{show:!!e.message,title:e.message,onClose:e.handleError,error:e.error,loading:e.loading},null,8,["show","title","onClose","error","loading"]),Object(a["g"])("section",d,[Object(a["g"])("h1",null,Object(a["z"])(e.displayTitlePage),1),Object(a["g"])("button",{class:e.$route.params.tr_codigo?"action-button":"action-button blocked",onClick:t[1]||(t[1]=function(t){return e.register()})},Object(a["z"])(e.displayButtonText),3),100==e.tratamientoInfoJson.porcentajeAvance?(Object(a["p"])(),Object(a["d"])("button",{key:0,class:"action-button",style:{top:"140px"},onClick:t[2]||(t[2]=function(t){return e.register()})}," Generar informe ")):Object(a["e"])("",!0),Object(a["g"])("div",f,[Object(a["g"])("div",p,[b,g,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["p"])(),Object(a["d"])("span",m,Object(a["z"])(e.tratamientoInfoJson.codigo),1)):Object(a["e"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["e"])("",!0):(Object(a["p"])(),Object(a["d"])("input",{key:1,type:"text",disabled:"true",placeholder:e.tratamientoInfoJson.codigo},null,8,["placeholder"]))]),Object(a["g"])("div",h,[v,j,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["p"])(),Object(a["d"])("span",O,Object(a["z"])(e.codigoEvaluacion),1)):Object(a["e"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["e"])("",!0):Object(a["H"])((Object(a["p"])(),Object(a["d"])("input",{key:1,type:"text",placeholder:"Buscar por código",onKeyup:t[3]||(t[3]=function(){return e.searchCodigoEvaluacion&&e.searchCodigoEvaluacion.apply(e,arguments)}),"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.codigoEvaluacion=t})},null,544)),[[a["E"],e.codigoEvaluacion,void 0,{trim:!0}]]),Object(a["g"])("div",x,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.evaluacionList,(function(t){return Object(a["p"])(),Object(a["d"])("p",{class:"dropdownSelect",key:t.evaluacionId,onClick:function(n){return e.selectEvaluacion(t)}},Object(a["z"])(t.codigo+"-"+t.nombre),9,["onClick"])})),128))]),e.validationForm.evaluacionId?(Object(a["p"])(),Object(a["d"])("p",w,Object(a["z"])(e.validationForm.evaluacionId),1)):Object(a["e"])("",!0)]),Object(a["g"])("div",y,[k,E,Object(a["H"])(Object(a["g"])("select",{class:"select","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.codigoPrueba=t}),name:"prueba"},[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.pruebas,(function(e){return Object(a["p"])(),Object(a["d"])("option",{key:e.pruebaId,value:e.codigo},Object(a["z"])(e.codigo),9,["value"])})),128))],512),[[a["D"],e.codigoPrueba]])]),Object(a["g"])("div",I,[C,R,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["p"])(),Object(a["d"])("span",S,Object(a["z"])(e.tratamientoInfoJson.nombre),1)):Object(a["e"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["e"])("",!0):Object(a["H"])((Object(a["p"])(),Object(a["d"])("input",{key:1,type:"text",placeholder:"Plan de tratamiento-nombre","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.tratamientoInfoJson.nombre=t})},null,512)),[[a["E"],e.tratamientoInfoJson.nombre,void 0,{trim:!0}]]),e.validationForm.nombre?(Object(a["p"])(),Object(a["d"])("p",T,Object(a["z"])(e.validationForm.nombre),1)):Object(a["e"])("",!0)]),Object(a["g"])("div",A,[$,M,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["p"])(),Object(a["d"])("span",J,Object(a["z"])(e.analistaCalc()),1)):Object(a["e"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["e"])("",!0):Object(a["H"])((Object(a["p"])(),Object(a["d"])("select",{key:1,class:"select","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.tratamientoInfoJson.usuarioId=t}),name:"analista"},[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.analistaList,(function(e){return Object(a["p"])(),Object(a["d"])("option",{key:e.usuarioId,value:e.usuarioId},Object(a["z"])(e.codigo+"-"+e.nombres+" "+e.apellidos),9,["value"])})),128))],512)),[[a["D"],e.tratamientoInfoJson.usuarioId]])]),Object(a["g"])("div",_,[Object(a["g"])("h4",null,[Object(a["g"])("strong",null,"Porcentaje de avance: "+Object(a["z"])(null===(u=e.tratamientoInfoJson)||void 0===u||null===(l=u.porcentajeAvance)||void 0===l?void 0:l.toFixed(2))+" %",1)])])]),e.showAccionesMitigacion?(Object(a["p"])(),Object(a["d"])("section",z,[D,B,e.update&&e.canEdit?(Object(a["p"])(),Object(a["d"])("div",F,[Object(a["g"])("div",null,[Object(a["g"])("i",{class:"fas fa-plus-circle",onClick:t[8]||(t[8]=function(){return e.goToTestSummary&&e.goToTestSummary.apply(e,arguments)})}),P,Object(a["g"])("span",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:t[9]||(t[9]=function(){return e.goToTestSummary&&e.goToTestSummary.apply(e,arguments)})},"Añadir nueva acción")]),Object(a["g"])("div",null,[Object(a["g"])("button",{class:"action-button table",onClick:t[10]||(t[10]=function(t){return e.deleteMassive()})}," Eliminación massiva ")])])):Object(a["e"])("",!0),Object(a["g"])("table",N,[Object(a["g"])("thead",H,[Object(a["g"])("tr",null,[e.update&&e.accionesMitigacion.length>0&&e.canEdit?(Object(a["p"])(),Object(a["d"])("th",L,[Object(a["H"])(Object(a["g"])("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.massiveCheck=t})},null,512),[[a["B"],e.massiveCheck]])])):Object(a["e"])("",!0),U,V,q,e.update?(Object(a["p"])(),Object(a["d"])("th",G)):Object(a["e"])("",!0),e.update&&e.canEdit?(Object(a["p"])(),Object(a["d"])("th",K)):Object(a["e"])("",!0),Z])]),Object(a["g"])("tbody",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(e.accionesMitigacion,(function(n){return Object(a["p"])(),Object(a["d"])("tr",{key:n.accionMitigacionId},[e.update&&e.canEdit?(Object(a["p"])(),Object(a["d"])("td",Y,[Object(a["H"])(Object(a["g"])("input",{type:"checkbox",id:n.accionMitigacionId,value:n.accionMitigacionId,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.checkedEntities=t})},null,8,["id","value"]),[[a["B"],e.checkedEntities]])])):Object(a["e"])("",!0),Object(a["g"])("td",W,[Object(a["g"])("div",null,[e.$route.params.tr_codigo&&!e.canEdit||e.canEdit&&!e.update?(Object(a["p"])(),Object(a["d"])("span",Q,Object(a["z"])(n.descripcion),1)):Object(a["e"])("",!0),e.update&&e.canEdit?Object(a["H"])((Object(a["p"])(),Object(a["d"])("input",{key:1,type:"text",style:{width:"90%","margin-left":"5px"},"onUpdate:modelValue":function(e){return n.descripcion=e}},null,8,["onUpdate:modelValue"])),[[a["E"],n.descripcion]]):Object(a["e"])("",!0),n.tieneMensaje?(Object(a["p"])(),Object(a["d"])("i",X)):Object(a["e"])("",!0)])]),Object(a["g"])("td",ee,[e.$route.params.tr_codigo&&!e.update?(Object(a["p"])(),Object(a["d"])("span",te,Object(a["z"])(n.fechaInicio?new Date(n.fechaInicio).toISOString().substr(0,10):(new Date).toISOString().substr(0,10)),1)):Object(a["e"])("",!0),e.update?(Object(a["p"])(),Object(a["d"])("input",{key:1,type:"date",onChange:function(e){return n.fechaInicio=e.target.value},value:e.userInfoJson&&n.fechaInicio?new Date(n.fechaInicio).toISOString().substr(0,10):null},null,40,["onChange","value"])):Object(a["e"])("",!0)]),Object(a["g"])("td",ne,[e.$route.params.tr_codigo&&!e.update?(Object(a["p"])(),Object(a["d"])("span",ae,Object(a["z"])(n.fechaFin?new Date(n.fechaFin).toISOString().substr(0,10):(new Date).toISOString().substr(0,10)),1)):Object(a["e"])("",!0),e.update?(Object(a["p"])(),Object(a["d"])("input",{key:1,type:"date",onChange:function(e){return n.fechaFin=e.target.value},value:e.userInfoJson&&n.fechaFin?new Date(n.fechaFin).toISOString().substr(0,10):null},null,40,["onChange","value"])):Object(a["e"])("",!0)]),e.update?(Object(a["p"])(),Object(a["d"])("td",{key:1,onClick:function(t){return e.editAccion(n)}},[re],8,["onClick"])):Object(a["e"])("",!0),e.update&&e.canEdit?(Object(a["p"])(),Object(a["d"])("td",{key:2,onClick:function(t){return e.deleteConfirm(n)}},[ce],8,["onClick"])):Object(a["e"])("",!0),Object(a["g"])("td",oe,[Object(a["g"])("p",{class:n.estado?"label success":"label error"},Object(a["z"])(n.estado?"Terminado":"En Proceso"),3)])])})),128))])])])):Object(a["e"])("",!0)])],64)})),se=n("5530"),ue=n("1da1"),le=(n("d81d"),n("7db0"),n("d3b7"),n("99af"),n("ac1f"),n("5319"),n("b64b"),n("4de4"),n("25f0"),n("96cf"),n("705f")),de=n("f50d"),fe=n("d43e"),pe=n("5c40"),be=n("f464"),ge=n("b74e"),me=n("2fc2"),he=n("b7ff"),ve=Object(pe["l"])({components:{NavBar:be["a"],ConfirmationModal:he["a"],Modal:le["a"]},computed:{evaluacion:function(){return this.$store.getters["evaluacionModule/obtenerEvaluacion"]},displayButtonText:function(){return this.$route.params.tr_codigo?this.update?"Guardar":"Editar":"Registrar"},displayTitlePage:function(){return this.$route.params.tr_codigo?this.update?"Editar plan de tratamiento":"Visualizar plan de tratamiento":"Registrar plan de tratamiento"}},data:function(){return{userInfoJson:Object(fe["h"])(),codigoEvaluacion:"",codigoPrueba:"",codigoListaVerificacion:"",timeout:void 0,evaluacionList:[],analistaList:[],pruebas:[],showAccionesMitigacion:!1,validationForm:{},tratamientoInfoJson:Object(fe["g"])(),massiveCheck:!1,checkedEntities:[],accionesMitigacion:[],accionSelected:"",message:null,loading:!1,error:!1,update:!1,modalTitle:"",showModalConfirmation:!1,massiveDelete:!1,canEdit:!1}},watch:{codigoPrueba:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.tr_codigo){t.next=3;break}return t.next=3,e.fetchAccionesMitigacion();case 3:case"end":return t.stop()}}),t)})))()},massiveCheck:function(){this.massiveCheck?this.checkedEntities=this.accionesMitigacion.map((function(e){return e.accionMitigacionId})):this.checkedEntities=[]}},methods:{analistaCalc:function(){var e=this,t=this.analistaList.find((function(t){return t.usuarioId==e.tratamientoInfoJson.usuarioId}));return t?t.codigo+"-"+t.nombres+" "+t.apellidos:""},handleError:function(){this.message=null},closeModal:function(){this.showModalConfirmation=!1},searchCodigoEvaluacion:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvaluacion();case 2:case"end":return t.stop()}}),t)}))),1e3)},fetchEvaluacion:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(me["c"],"evaluacion/lista?filter=").concat(e.codigoEvaluacion),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.evaluacionList=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchAnalista:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(me["c"],"usuario/lista/Analistas"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.analistaList=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},selectEvaluacion:function(e){this.tratamientoInfoJson.evaluacionId=e.evaluacionId,this.evaluacionList=[],this.codigoEvaluacion=e.codigo+"-"+e.nombre,this.pruebas=e.pruebaList},deleteConfirm:function(e){this.accionSelected=e.accionMitigacionId,this.modalTitle="Está seguro que desea eliminar la acción de mitigación?",this.showModalConfirmation=!0},deleteMassive:function(){this.checkedEntities.length>0?(this.massiveDelete=!0,this.showModalConfirmation=!0,this.modalTitle="Está seguro que desea eliminar las acciones de mitigación seleccionadas ?"):(this.message="Debe seleccionar al menos una acción de mitigación",this.error=!0)},register:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){var n,a,r,c,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.tr_codigo||e.update){t.next=3;break}return e.update=!0,t.abrupt("return");case 3:if(e.validationForm={},n=["evaluacionId","nombre"],a=Object(ge["b"])(n,e.tratamientoInfoJson),r=Object(ge["d"])(a,e.validationForm),console.log(r),console.log(e.tratamientoInfoJson),!r){t.next=50;break}if(e.$route.params.tr_codigo){t.next=34;break}return t.prev=12,t.next=15,fetch("".concat(me["c"],"plantratamiento"),{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(e.tratamientoInfoJson)});case 15:return c=t.sent,t.next=18,Object(ge["a"])(c);case 18:return t.next=20,c.json();case 20:o=t.sent,e.$router.replace("/plan-tratamiento/".concat(o.codigo)),e.showAccionesMitigacion=!0,e.loading=!1,e.error=!1,e.message="¡El plan de tratamiento ha sido registrado exitósamente!",setTimeout(Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="",t.next=3,e.fetchTratamiento();case 3:case"end":return t.stop()}}),t)}))),1500),t.next=32;break;case 29:t.prev=29,t.t0=t["catch"](12),console.log(t.t0);case 32:t.next=50;break;case 34:return i=Object(se["a"])(Object(se["a"])({},e.tratamientoInfoJson),{},{AccionMitigacionList:e.accionesMitigacion}),t.prev=35,t.next=38,fetch("".concat(me["c"],"plantratamiento/").concat(e.$route.params.tr_codigo),{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(i)});case 38:return s=t.sent,t.next=41,Object(ge["a"])(s);case 41:e.loading=!1,e.error=!1,e.message="¡El plan de tratamiento ha sido actualizado exitósamente!",setTimeout(Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.message="";case 1:case"end":return t.stop()}}),t)}))),1500),t.next=50;break;case 47:t.prev=47,t.t1=t["catch"](35),console.log(t.t1);case 50:case"end":return t.stop()}}),t,null,[[12,29],[35,47]])})))()},goToTestSummary:function(){this.$router.push("/lista-verificacion/".concat(this.codigoListaVerificacion,"/prueba/").concat(this.codigoPrueba,"/resumen"))},fetchTratamiento:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(me["c"],"plantratamiento/").concat(e.$route.params.tr_codigo),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,r=Object.keys(e.tratamientoInfoJson),e.tratamientoInfoJson=Object(ge["b"])(r,a),e.codigoEvaluacion=a.codigoEvaluacion,e.pruebas=a.pruebas.filter((function(e){return e.visibilidad})),e.codigoPrueba=e.pruebas[0].codigo,e.codigoListaVerificacion=a.listaVerificacionCodigo,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},fetchAccionesMitigacion:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(me["c"],"accionmitigacion/").concat(e.tratamientoInfoJson.tratamientoId,"/").concat(e.codigoPrueba),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.accionesMitigacion=t.sent,e.accionesMitigacion.length>0?(a=e.accionesMitigacion.length,r=e.accionesMitigacion.filter((function(e){return 1==e.estado})).length,e.tratamientoInfoJson.porcentajeAvance=r/a*100):e.tratamientoInfoJson.porcentajeAvance=0,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},editAccion:function(e){var t=this;return Object(ue["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$router.push("/accion-mitigacion/edicion/".concat(e.accionMitigacionId));case 1:case"end":return n.stop()}}),n)})))()},deleteAccion:function(e){var t=this;return Object(ue["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.closeModal(),a=e||t.accionSelected,n.prev=2,n.next=5,fetch("".concat(me["c"],"accionmitigacion/").concat(a),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 5:return r=n.sent,n.next=8,Object(ge["a"])(r);case 8:e||(t.message="¡Se ha eliminado accion exitósamente!",setTimeout(Object(ue["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.message="",e.next=3,t.fetchAccionesMitigacion();case 3:case"end":return e.stop()}}),e)}))),1500)),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},confirmMassiveDelete:function(){var e=this;return Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.checkedEntities.map(function(){var t=Object(ue["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deleteAccion(n);case 3:a=t.sent,console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),e.massiveDelete=!1,e.showModalConfirmation=!1,e.modalTitle="",e.message="¡Se ha eliminado las acciones de mitigacion exitósamente!",setTimeout(Object(ue["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAccionesMitigacion();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3);case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;Object(ue["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(de["a"])();case 2:return e.userInfoJson=t.sent,e.userInfoJson.rol==me["i"].JEFE_DE_RIESGOS?e.canEdit=!0:e.canEdit=!1,t.next=6,e.fetchAnalista();case 6:if(e.$route.params.tr_codigo){t.next=24;break}return t.prev=7,t.next=10,fetch("".concat(me["c"],"plantratamiento/count"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 10:return n=t.sent,t.next=13,n.json();case 13:a=t.sent,r="",r=a>10?"0":"00",e.tratamientoInfoJson.codigo="TR"+r+(a+1).toString(),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](7),console.log(t.t0);case 22:t.next=29;break;case 24:return e.showAccionesMitigacion=!0,t.next=27,e.fetchTratamiento();case 27:return t.next=29,e.fetchAccionesMitigacion();case 29:case"end":return t.stop()}}),t,null,[[7,19]])})))()}});n("90d0");ve.render=ie,ve.__scopeId="data-v-323ddf7c";t["default"]=ve},"7db0":function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").find,c=n("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(o)},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"90d0":function(e,t,n){"use strict";n("e15e")},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),c=n("5692"),o=n("7c73"),i=n("69f3").get,s=n("fce3"),u=n("107c"),l=RegExp.prototype.exec,d=c("native-string-replace",String.prototype.replace),f=l,p=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),b=r.UNSUPPORTED_Y||r.BROKEN_CARET,g=void 0!==/()??/.exec("")[1],m=p||g||b||s||u;m&&(f=function(e){var t,n,r,c,s,u,m,h=this,v=i(h),j=v.raw;if(j)return j.lastIndex=h.lastIndex,t=f.call(j,e),h.lastIndex=j.lastIndex,t;var O=v.groups,x=b&&h.sticky,w=a.call(h),y=h.source,k=0,E=e;if(x&&(w=w.replace("y",""),-1===w.indexOf("g")&&(w+="g"),E=String(e).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==e[h.lastIndex-1])&&(y="(?: "+y+")",E=" "+E,k++),n=new RegExp("^(?:"+y+")",w)),g&&(n=new RegExp("^"+y+"$(?!\\s)",w)),p&&(r=h.lastIndex),c=l.call(x?n:h,E),x?c?(c.input=c.input.slice(k),c[0]=c[0].slice(k),c.index=h.lastIndex,h.lastIndex+=c[0].length):h.lastIndex=0:p&&c&&(h.lastIndex=h.global?c.index+c[0].length:r),g&&c&&c.length>1&&d.call(c[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(c[s]=void 0)})),c&&O)for(c.groups=u=o(null),s=0;s<O.length;s++)m=O[s],u[m[0]]=c[m[1]];return c}),e.exports=f},"9f7f":function(e,t,n){var a=n("d039"),r=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},aa14:function(e,t,n){"use strict";n("5ef3")},ab13:function(e,t,n){var a=n("b622"),r=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(a){}}return!1}},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var a=n("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b680:function(e,t,n){"use strict";var a=n("23e7"),r=n("a691"),c=n("408a"),o=n("1148"),i=n("d039"),s=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)},d=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},f=function(e,t,n){var a=-1,r=n;while(++a<6)r+=t*e[a],e[a]=r%1e7,r=u(r/1e7)},p=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=u(a/t),a=a%t*1e7},b=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=String(e[t]);n=""===n?a:n+o.call("0",7-a.length)+a}return n},g=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){s.call({})}));a({target:"Number",proto:!0,forced:g},{toFixed:function(e){var t,n,a,i,s=c(this),u=r(e),g=[0,0,0,0,0,0],m="",h="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(m="-",s=-s),s>1e-21)if(t=d(s*l(2,69,1))-69,n=t<0?s*l(2,-t,1):s/l(2,t,1),n*=4503599627370496,t=52-t,t>0){f(g,0,n),a=u;while(a>=7)f(g,1e7,0),a-=7;f(g,l(10,a,1),0),a=t-1;while(a>=23)p(g,1<<23),a-=23;p(g,1<<a),f(g,1,1),p(g,2),h=b(g)}else f(g,0,n),f(g,1<<-t,0),h=b(g)+o.call("0",u);return u>0?(i=h.length,h=m+(i<=u?"0."+o.call("0",u-i)+h:h.slice(0,i-u)+"."+h.slice(i-u))):h=m+h,h}})},b74e:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n("1da1"),r=n("3835");n("96cf"),n("159b"),n("4fad"),n("c1f9"),n("4de4"),n("caad"),n("2532");function c(e,t){var n=!0;return Object.entries(e).forEach((function(e){var a=Object(r["a"])(e,2),c=a[0],o=a[1];null!=o&&""!=o||(t[c]="Este campo es obligatorio",n=!1)})),n}function o(e,t){var n=Object.fromEntries(Object.entries(t).filter((function(t){var n=Object(r["a"])(t,1),a=n[0];return e.includes(a)})));return n}function i(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}function s(e){var t=/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{10,}$/;return t.test(e)}function u(e){var t=/^(?=.{9})(?!.{16})\+?\d+(-\d+)*$/;return t.test(e)}function l(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,t.text();case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},b7ff:function(e,t,n){"use strict";var a=n("7a23"),r=Object(a["J"])("data-v-ea440b04");Object(a["s"])("data-v-ea440b04");var c={key:0,class:"modal"},o=Object(a["g"])("i",{class:"far fa-times-circle fa-2x"},null,-1),i={class:"flex-button"};Object(a["q"])();var s=r((function(e,t,n,r,s,u){var l=Object(a["x"])("backdrop");return Object(a["p"])(),Object(a["d"])(a["a"],null,[Object(a["g"])(l,{show:e.show,onClose:e.tryClose,closable:!1},null,8,["show","onClose"]),e.show?(Object(a["p"])(),Object(a["d"])("div",c,[o,Object(a["g"])("p",null,Object(a["z"])(e.title),1),Object(a["g"])("div",i,[Object(a["g"])("button",{onClick:t[1]||(t[1]=function(t){return e.confirm()}),class:"action-button"},"Aceptar"),Object(a["g"])("button",{style:{background:"var(--danger)"},onClick:t[2]||(t[2]=function(t){return e.cancel()}),class:"action-button"}," Cancelar ")])])):Object(a["e"])("",!0)],64)})),u=n("5c40"),l=n("c2de"),d=Object(u["l"])({components:{Backdrop:l["a"]},props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},massiveDelete:{type:Boolean,required:!1}},emits:["confirmMassive","close","confirm","cancel"],methods:{tryClose:function(){this.$emit("close")},confirm:function(){this.massiveDelete?this.$emit("confirmMassive"):this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}});n("aa14");d.render=s,d.__scopeId="data-v-ea440b04";t["a"]=d},c1f9:function(e,t,n){var a=n("23e7"),r=n("2266"),c=n("8418");a({target:"Object",stat:!0},{fromEntries:function(e){var t={};return r(e,(function(e,n){c(t,e,n)}),{AS_ENTRIES:!0}),t}})},caad:function(e,t,n){"use strict";var a=n("23e7"),r=n("4d64").includes,c=n("44d2");a({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cefe:function(e,t,n){"use strict";n("0aec")},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("9263"),c=n("d039"),o=n("b622"),i=n("9112"),s=o("species"),u=RegExp.prototype;e.exports=function(e,t,n,l){var d=o(e),f=!c((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=f&&!c((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!f||!p||n){var b=/./[d],g=t(d,""[e],(function(e,t,n,a,c){var o=t.exec;return o===r||o===u.exec?f&&!c?{done:!0,value:b.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}));a(String.prototype,e,g[0]),a(u,d,g[1])}l&&i(u[d],"sham",!0)}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,c=n("1dde"),o=c("map");a({target:"Array",proto:!0,forced:!o},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e15e:function(e,t,n){},f464:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),r=Object(a["J"])("data-v-5a41f577");Object(a["s"])("data-v-5a41f577");var c={class:"header"};Object(a["q"])();var o=r((function(e,t,n,r,o,i){return Object(a["p"])(),Object(a["d"])("div",c,[Object(a["g"])("p",{onClick:t[1]||(t[1]=function(t){return e.goToDashboard()}),class:"dashboardText"},"Sistema Experto de Monitoreo"),Object(a["g"])("p",null,"Bienvenido: "+Object(a["z"])(e.name+" "+e.lastName),1)])})),i=n("5c40"),s=Object(i["l"])({props:["name","lastName"],methods:{goToDashboard:function(){this.$router.push("/dashboard")}}});n("cefe");s.render=o,s.__scopeId="data-v-5a41f577";t["a"]=s},f50d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("1da1"),r=(n("96cf"),n("d3b7"),n("2fc2"));function c(){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r["c"],"usuario"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},fce3:function(e,t,n){var a=n("d039");e.exports=a((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-76f81e8a.3df695a9.js.map